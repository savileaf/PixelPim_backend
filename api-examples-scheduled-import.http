### Scheduled Import API Examples

@baseUrl = http://localhost:3000
@authToken = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEsImVtYWlsIjoicHJhZ3lhbjE1MTZAZ21haWwuY29tIiwiaWF0IjoxNzU1MDc2Njk2LCJleHAiOjE3NTUxNjMwOTZ9.pQM2bGyQAKPr-NJhfIu7rDK6ygiXHc_qdcTXbXDDTYI

### 1. Schedule a CSV import job
POST {{baseUrl}}/products/import/schedule
Content-Type: application/json
Authorization: {{authToken}}

{
  "cronExpression": "0 0 * * *",
  "csvUrl": "https://example.com/products.csv",
  "name": "Daily Product Import",
  "description": "Import products from CSV every day at midnight"
}

###
# Note: CSV should contain required fields (name, sku) and optional fields:
# - Standard fields: categoryName, familyName, productLink, imageUrl, subImages
# - Custom attributes: Any other column will become a custom attribute with auto-inferred type
# 
# Example CSV format:
# name,sku,categoryName,familyName,color,size,price,inStock,description
# "Red T-Shirt",TSH-001,Clothing,Apparel,Red,Large,29.99,true,"Cotton t-shirt"
# 
# Types are auto-inferred: BOOLEAN, INTEGER, NUMBER, DATE, URL, EMAIL, ARRAY, TEXT, STRING

### 2. Schedule a CSV import job with hourly frequency
POST {{baseUrl}}/products/import/schedule
Content-Type: application/json
Authorization: {{authToken}}

{
  "cronExpression": "0 */1 * * *",
  "csvUrl": "https://example.com/hourly-products.csv",
  "name": "Hourly Product Sync",
  "description": "Sync products every hour"
}

### 3. Schedule a CSV import job without optional fields
POST {{baseUrl}}/products/import/schedule
Content-Type: application/json
Authorization: {{authToken}}

{
  "cronExpression": "0 9 * * 1",
  "csvUrl": "https://example.com/weekly-products.csv"
}

### 4. Get all import jobs with execution logs
GET {{baseUrl}}/products/import/jobs?includeExecutions=true
Authorization: {{authToken}}

### 5. Get all import jobs without execution logs
GET {{baseUrl}}/products/import/jobs?includeExecutions=false
Authorization: {{authToken}}

### 6. Get a specific import job (replace {jobId} with actual job ID)
GET {{baseUrl}}/products/import/jobs/cm2d7e8f90000c0iw12345abc
Authorization: {{authToken}}

### 7. Update a scheduled import job
PATCH {{baseUrl}}/products/import/jobs/cm2d7e8f90000c0iw12345abc
Content-Type: application/json
Authorization: {{authToken}}

{
  "cronExpression": "0 2 * * *",
  "name": "Updated Daily Import",
  "description": "Updated to run at 2 AM instead of midnight",
  "isActive": true
}

### 8. Pause an import job
POST {{baseUrl}}/products/import/jobs/cm2d7e8f90000c0iw12345abc/pause
Authorization: {{authToken}}

### 9. Resume a paused import job
POST {{baseUrl}}/products/import/jobs/cm2d7e8f90000c0iw12345abc/resume
Authorization: {{authToken}}

### 10. Cancel an import job
DELETE {{baseUrl}}/products/import/jobs/cm2d7e8f90000c0iw12345abc
Authorization: {{authToken}}

### 11. Delete an import job permanently
DELETE {{baseUrl}}/products/import/jobs/cm2d7e8f90000c0iw12345abc/delete
Authorization: {{authToken}}

### 12. Get execution logs for a job
GET {{baseUrl}}/products/import/jobs/cm2d7e8f90000c0iw12345abc/executions?page=1&limit=20
Authorization: {{authToken}}

### 13. Get execution statistics for a job
GET {{baseUrl}}/products/import/jobs/cm2d7e8f90000c0iw12345abc/stats
Authorization: {{authToken}}